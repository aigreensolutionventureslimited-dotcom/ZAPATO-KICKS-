<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Zapato Kicks | Collection</title>

<link href="https://fonts.googleapis.com/css2?family=Syne:wght@800&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* === DESIGN UNCHANGED === */
:root{--bg:#030303;--accent:#c5a059;--text:#fff;--border:rgba(255,255,255,.08)}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text)}
nav{position:fixed;top:0;width:100%;padding:18px 5%;display:flex;justify-content:space-between;align-items:center;background:rgba(3,3,3,.9);backdrop-filter:blur(15px);z-index:1000;border-bottom:1px solid var(--border)}
.logo{font-family:'Syne';font-size:1rem;letter-spacing:2px;color:var(--accent)}
.vault-btn{font-size:.7rem;font-weight:700;background:#fff;color:#000;padding:8px 15px;border-radius:20px}
.filters{display:flex;gap:20px;padding:100px 5% 20px;overflow-x:auto}
.f-btn{background:none;border:none;color:#555;font-size:.7rem;font-weight:700;text-transform:uppercase}
.f-btn.active{color:var(--accent)}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:0 5% 100px}
.card img{width:100%;aspect-ratio:1/1.2;object-fit:cover;background:#0a0a0a}
.card-name{font-size:.7rem;margin-top:10px;opacity:.8}
.card-price{font-size:.85rem;font-weight:700;color:var(--accent)}
.modal,.overlay,.zoom{position:fixed;inset:0;display:none;background:#000;z-index:2000}
.zoom img{width:100%;height:100%;object-fit:contain}
</style>
</head>

<body>

<nav>
  <div class="logo">ZAPATO VAULT</div>
  <div class="vault-btn" onclick="showVault()">CHECKOUT (<span id="count">0</span>)</div>
</nav>

<div class="filters">
  <button class="f-btn active" onclick="filterCat('All',this)">All</button>
  <button class="f-btn" onclick="filterCat('Sneakers',this)">Sneakers</button>
  <button class="f-btn" onclick="filterCat('Corporate',this)">Corporate</button>
  <button class="f-btn" onclick="filterCat('Palms',this)">Palms</button>
  <button class="f-btn" onclick="filterCat('Slides',this)">Slides</button>
</div>

<div class="grid" id="grid"></div>

<div id="productModal" class="modal"></div>
<div id="checkoutModal" class="overlay"></div>
<div class="zoom" id="zoom"><img id="zoomImg"></div>

<script>
const supa = supabase.createClient(
  'https://rvfuenrggxverrnnmcet.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2ZnVlbnJnZ3h2ZXJybm5tY2V0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4Njc2MTcsImV4cCI6MjA4MzQ0MzYxN30.aKCaWeXR1Le68waDqG_UHiOOZpkZYNC2FTTMutY-CqI'
);

const grid = document.getElementById('grid');
const productModal = document.getElementById('productModal');
const checkoutModal = document.getElementById('checkoutModal');
const zoom = document.getElementById('zoom');
const zoomImg = document.getElementById('zoomImg');
const count = document.getElementById('count');

let products=[], cart=[];

async function load(){
  const { data, error } = await supa.from('products').select('*');
  if(error){console.error(error);return}
  products=data;
  render(products);
}

function render(items){
  grid.innerHTML = items.map((p,i)=>`
    <div class="card" onclick="openProduct(${i})">
      <img src="${p.image_url.split(',')[0].trim()}">
      <div class="card-name">${p.name}</div>
      <div class="card-price">â‚¦${p.price.toLocaleString()}</div>
    </div>`).join('');
}

function openProduct(i){
  const p = products[i];
  const imgs = p.image_url.split(',').map(x=>x.trim());

  productModal.innerHTML = `
    ${imgs.map(img=>`<img src="${img}" onclick="zoomImg.src='${img}';zoom.style.display='block'">`).join('')}
    <button onclick="addToCart(${i})">ADD TO VAULT</button>
    <button onclick="productModal.style.display='none'">CLOSE</button>
  `;
  productModal.style.display='block';
}

function addToCart(i){
  cart.push(products[i]);
  count.innerText=cart.length;
  productModal.style.display='none';
}

function showVault(){
  if(!cart.length) return alert('Vault is empty');
  checkoutModal.style.display='block';
}

function filterCat(cat,btn){
  document.querySelectorAll('.f-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  render(cat==='All'?products:products.filter(p=>p.cat===cat));
}

zoom.onclick=()=>zoom.style.display='none';
load();
</script>

</body>
</html>
